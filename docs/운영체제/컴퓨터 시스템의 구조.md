***
## 1. 운영체제 (Os)

- 컴퓨터 하드웨어 바로 위에 설치되어 사용자 및 다른 모든 소프트웨어와 하드웨어를 연결하는 소프트웨어 계층
- 협의의 운영체제(커널) : 운영체제의 핵심 부분으로 메모리에 상주하는 부분
- 광의의 운영체제 : 커널 뿐 아니라 각종 주변 시스템 유틸리티를 포함한 개념

- 운영체제의 목적 : 사용자에게 편리함 제공, 자원을 효율적으로 관리
	- 운영체제는 동시 사용자/프로그램들이 각각 독자적 컴퓨터에서 수행되는 것 같은 환상(illusion)을 제공
	- 하드웨어를 직접 다루는 복잡한 부분을 운영체제가 대행
	- 컴퓨터 시스템의 자원(CPU, 메모리, I/O 장치 등)을 효율적으로 관리
	- 특정 프로그램, 특정 사용자에게 지나친 불이익이 발생하지 않도록 형평성을 유지
	
- 운영체제의 분류
	- 동시 작업 가능 여부 
		- 단일 작업(single tasking) : 한 번에 하나의 작업만 처리
		- 다중 작업(multi tasking) : 동시에 두 개이상의 작업을 처리
	- 사용자의 수
		- 단일 사용자 : MS-DOS, MS windows
		- 다중 사용자 : UNIX, NT server
	- 처리 방식 
		- 일괄처리(batch processing) : 작업 요청의 일정량 모아서 한꺼번에 처리
			- 작업이 완전 종료될 때까지 기다려야한다. 
		- 시분할(time sharing) : 여러 작업을 수행할 때 컴퓨터 처리 능력을 일정한 시간 단위로 분할하여 사용, 일괄 처리 시스템에 비해 짧은 응답 시간을 가짐. interactive한 방식 
		- 실시간(Realtime OS) : 정해진 시간 안에 어떠한 일이 반드시 종료됨이 보장되어야 하는 실시간 시스템을 위한 OS. ex) 원자로/공장 제어, 미사일 제어, 반도체 장비, 로보트 제어
	- 용어 정리 
		- Multitasking : 프로그램을 여러가지를 동시에 돌림
		- Multiprogramming : 메모리에 프로그램이 여러개 올라가있는 상황
		- Time sharing : CPU의 시간을 분할하여 나누어 쓴다는 의미를 강조
		- Multiprocessor : 하나의 컴퓨터에 여러 CPU가 여러 개 붙어 있음 (문제가 생긴다.)
	
- 운영체제의 예
	- UNIX
		- 코드의 대부분을 C언어로 작성
		- 높은 이식성 (여러 아키텍쳐에서 호환이 되기 때문)
		- 최소한의 커널 구조
		- 복잡한 시스템에 맞게 확장 용이
		- 소스 코드 공개(일부)
		- 프로그램 개발에 용이
		- 다양한 버전(Linux)
	- DOS(Disk Operating System)
		- MS 사에서 개인용 컴퓨터에 적용하기 위해 개발
		- 단일 작업 체제
	- MS Window 
		- MS 사의 다중 작업용 GUI기반 운영체제
		- 풍부한 지원 소프트웨어
	
***
## 2. 컴퓨터 시스템 구조

- 구조![컴퓨터 시스템의 구조-20250117212157627.webp](images%2F%EC%BB%B4%ED%93%A8%ED%84%B0%20%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%9D%98%20%EA%B5%AC%EC%A1%B0-20250117212157627.webp)
- I/O 장치에는 작은 CPU가 존재한다. 이를 controller라고 한다. 실제 기계어를 연산하는 과정을 가지고 있다
- CPU는 기계어를 연산하기 위한 작업공간을 memory라고 한다. 각각의 I/O장치에 있는 이 공간을 local buffer라고 한다.
- mode bit : CPU가 운영체제에 의해 실행될 경우 무엇이든지 해도 상관없다.하지만 운영체제가 사용자 프로그램으로 CPU를 넘길 경우 문제가 생길 수 있다. 무한루프, 파일 등, CPU를 잡고 있으면 문제가 생길 수 있다. 이러한 문제를 해결하기 위한 보호장치
	- 사용자 프로그램의 잘못된 수행으로 다른 프로그램 및 운영체제에 피해가 가지 않도록 하기 위한 보호 장치 필요
	- Mode bit을 통해 하드웨어적으로 두 가지 모드의 operation 지원
	- 1: 사용자 프로그램 실행, 0: OS코드 수행
	- 위험한 명령어인데 mode bit이 사용자 프로그램을 실행한다면,CPU가 자동으로 OS로 넘어간다.
- exception : 권한이 없는 기능을 수행하려고 할 때 CPU가 자동으로 OS로 넘어간다.
- Interrupt : CPU는 Interrupt line이 존재한다. 매 순간, 이 Interrupt line을 확인하고 OS에 넘겨줄지를 결정
- registers : 연산에 사용되는 input, output을 저장하기 위한 빠르고 작은 크기의 장소
	- Program counter : 다음 번에 실행할 메모리의 주소를 가진 레지스터
- timer : 일정 시간 간격으로 interrupt를 발생시킨다.프로그램에 넘길때 timer에 시간을 setting하고 넘긴다. OS는 이 시간이 지나게되면 CPU를 뺏어오게 된다. 즉, 정해진 시간이 흐른뒤 운영체제에게 제어권이 넘어가도록 인터럽트를 발생시킨다. 이로 인해 CPU를 특정 프로그램이 독점하는 것으로부터 보호 
***
## 3. 시스템콜(System Call)

CPU -> I/O controller (기계어로 요청, 특권명령으로 분류) : 사용자 프로그램이 직접 요청을 할 수 없다. OS에게 부탁을해서 접근하는 것을 시스템콜이라고 한다.
- 사용자 프로그램이 운영체제의 서비스를 받기 위해 커널 함수를 호출하는 것.(커널 함수라는 것은 큐에 있는 OS함수)
- 프로그램이 IO가 필요한 상황에서는 운영체제로의 점프가 필요하다. 다른 프로그램을 모두 건너뛰고 CPU를 운영체제로 넘겨야하는 상황이다.  프로그램 스스로 Interrupt를 걸게 된다.
***
## 4. 인터럽트 (Interrupt)

- Interrupt(하드웨어 인터럽트) : 하드웨어가 발생시킨 인터럽트 (I/O 출력)
- Trap(소프트웨어 인터럽트) 
	- Exception : 프로그램이 오류를 범한 경우 (ex. 본인이 권한이 없는 코드를 실행)
	- System call : 프로그램이 커널 함수를 호출하는 경우
	 
- 인터럽트 벡터 : 해당 인터럽트의 처리 루틴 주소를 가지고 있다.
- 인터럽트 처리 루틴 (Interrupt Service Routine, 인터럽트 핸들러) : 해당 인터럽트를 처리하는 커널 함수
- 현대의 운영체제는 인터럽트에 의해 구동된다.
***
## 5. Device Controller

- 각 장치를 통제하는 일종의 작은 CPU로 hardware이다.
- device driver : OS 코드 중, 각 장치별 처리루틴을 말하며 software이다. CPU가 I/O에게 요청하는 코드
- I/O device controller
	- 해당 I/O 장치유형을 관리하는 일종의 작은 CPU
	- 제어 정보를 위해 control register, status register를 가진다.
	- local buffer를 가진다.(일종의 data register)
- I/O는 실제 device 와 local buffer 사이에서 일어남
- Device controller는 I/O가 끝났을 경우 interrupt로 CPU에 그 사실을 알린다.
***
## 6. 동기식 입출력과 비동기식 입출력

- 동기식 입출력(Synchronous I/O)
	- I/O 요청 후 입출력 작업이 완료된 후에야 제어가 사용자 프로그램에 넘어간다.
	- 구현방법 : 
		- I/O가 끝날 때까지 CPU를 낭비시킴. 매시점 하나의 I/O만 일어날 수있다.
		- I/O가 완료될 때까지 해당 프로그램에게서 CPU를 빼앗음. I/O 처리를 기다르는 줄에 그 프로그램을 줄세운다.
		- 다른 프로그램에게 CPU를 준다.
- 비동기식 입출력(asynchronous I/O)
	- I/O가 시작된 후 입출력 작업이 끝나기를 기다리지 않고 제어가 사용자 프로그램에 즉시 넘어감
	![컴퓨터 시스템의 구조-20250117212202632.webp](images%2F%EC%BB%B4%ED%93%A8%ED%84%B0%20%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%9D%98%20%EA%B5%AC%EC%A1%B0-20250117212202632.webp)
***
## 7. DMA (Direct Memory Access)

- 빠른 입출력 장치를 메모리에 가까운 속도로 처리하기 위해 사용
- CPU의 중재 없이 device controller가 device의 buffer storage의 내용을 메모리에 block단위로 직접 전송
- 바이트 단위가 아니라 block 단위로 인터럽트를 발생시킨다.
- 인터럽트를 너무 자주 발생시키면, CPU에 비효율적이다. I/O가 빠른 device의 경우 특히 바로바로 인터럽트가 생긴다. 즉, memory에 직접 접근할 수 있는 장치이다.
- block단위의 내용이 찼을 때  DMA가 메모리에 직접 전송, 이 후 DMA가 memory에 복사한다. 이 후에 인터럽트를 걸게 된다.
![컴퓨터 시스템의 구조-20250117212215215.webp](images%2F%EC%BB%B4%ED%93%A8%ED%84%B0%20%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%9D%98%20%EA%B5%AC%EC%A1%B0-20250117212215215.webp)
***
